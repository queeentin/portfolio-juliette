{% extends "base.html" %}

{% block content %}

{% set rightArticles = [] %}
{% for article in articles if article.lang == page.lang %}
    {{ rightArticles.append(article) or "" }}
{% endfor %}

{% set rightCats = [] %}
{% for cat in rightArticles %}
    {{ rightCats.append(cat.category) or "" }}
{% endfor %}

<div id="container">

    <div id="filtres">
        <button class="active btn">TOUT</button>
        {% for el in rightCats | unique %}
            <button class="btn">{{ el }}</button>
        {% endfor %}
        <div class="spacer"></div>
    </div>

    <div id="projets">

        {% for article in rightArticles %}
                <div class="contenu" style="{{ article.background }}" data-tag="{{ article.category|unique }}">
                    <div class="caroussel">
                        <div class="cursor left prev"></div>
                        <div class="cursor right next"></div>
                        <ul class="serie">
                            {% for image in article.images %}
                                <li {% if loop.first %} class="active"{% endif %}><img src="{{ SITEURL }}/projets/{{ article.slug }}/{{ image }}"></li>
                            {% endfor %}
                        </ul>
                    </div>
                    <h1>{{ article.title }}</h1>
                    <div class="texte">
                        {{ article.content }}
                    </div>
                    <div class="details">
                        <span>{{ article.place }}, {{ article.date|strftime('%Y') }}</span>
                        <span>{{ article.partners }}</span>
                        <span>{{ article.category|unique }}</span>
                    </div>
                </div>
        {% endfor %}

    </div>
</div>
{% endblock %}